import { Component } from 'react'
import { MDXProvider } from '@mdx-js/tag'
import { withRouter } from 'next/router'
import Link from 'next/link'

import * as bodyLocker from '~/new-components/utils/body-locker'
import changeHash from '~/new-components/utils/change-hash'
import components from '~/new-components/mdx-components'
import Content from '~/new-components/layout/content'
import Context from '~/new-components/docs-page/context'
import DocsBuilder from '~/new-components/docs-builder'
import DocsIndex from '~/new-components/docs-index'
import getSection from '~/new-components/utils/get-section'
import Head from '~/new-components/layout/head'
import Header from '~/new-components/header'
import Main from '~/new-components/layout/main'
import Page from '~/new-components/layout/page'
import scrollToElement from '~/new-components/utils/scroll-to-element'
import Select from '~/components/select'
import Sidebar from '~/new-components/layout/sidebar'
import ToggleGroup, { ToggleItem } from '~/new-components/toggle-group'
import withPermalink from '~/new-components/docs-page/docs/with-permalink'
import Entry from './entry'
import Section from './section'
import SubEntry from './sub-entry'
import getFragmentById from './get-fragment-by-id'
import getSlugsForId from './get-slugs-for-id'
import getHref from './get-href'

const toc = [
  {
    id: '_ezrr1n4yj',
    title: 'Getting Started',
    slug: 'getting-started',
    sections: [
      {
        id: '_kdg7g53gx',
        title: 'Introduction to Now',
        slug: 'introduction-to-now',
        isPage: true,
        entries: [
          {
            id: '_vwrs8kb9e',
            title: 'Try Now',
            slug: 'try-now',
            isPage: false,
            subEntries: []
          },
          {
            id: '_u6q8e6mib',
            title: 'Get Started',
            slug: 'get-started',
            isPage: false,
            subEntries: []
          }
        ]
      },
      {
        id: '_dkop128z6',
        title: 'Installation',
        slug: 'installation',
        isPage: true,
        entries: [
          {
            id: '_zawobm7dr',
            title: 'Now Desktop',
            slug: 'now-desktop',
            isPage: false,
            subEntries: []
          },
          {
            id: '_185ugsa5t',
            title: 'Now CLI',
            slug: 'now-cli',
            isPage: false,
            subEntries: [
              {
                id: '_102vxxmc1',
                title: 'From npm',
                slug: 'from-npm'
              },
              {
                id: '_5f0snfvf9',
                title: 'From binaries',
                slug: 'from-binaries'
              }
            ]
          },
          {
            id: '_fxxusa5jz',
            title: 'Now for GitHub',
            slug: 'now-for-github',
            isPage: false,
            subEntries: []
          }
        ]
      }
    ]
  },
  {
    id: '_6fzcybe8o',
    title: 'Deployments',
    slug: 'deployments',
    sections: [
      {
        id: '_okgmwk7n1',
        title: 'Basics',
        slug: 'basics',
        isPage: true,
        entries: [
          {
            id: '_m2xoco6ry',
            title: 'Your First Deployment',
            slug: 'your-first-deployment',
            isPage: false,
            subEntries: []
          },
          {
            id: '_feqedb8zs',
            title: 'Introducing a Build Step',
            slug: 'introducing-a-build-step',
            isPage: false,
            subEntries: []
          }
        ]
      },
      {
        id: '_ihhfb8bjg',
        title: 'Configuration',
        slug: 'configuration',
        isPage: true,
        entries: [
          {
            id: '_ux4g0k2g1',
            title: 'Schemas',
            slug: 'schemas',
            isPage: false,
            subEntries: []
          },
          {
            id: '_119645iui',
            title: 'Configuration File',
            slug: 'configuration-file',
            isPage: false,
            subEntries: []
          },
          {
            id: '_w2ne93lx4',
            title: 'version',
            slug: 'version',
            isPage: false,
            subEntries: []
          },
          {
            id: '_junj39tty',
            title: 'alias',
            slug: 'alias',
            isPage: false,
            subEntries: []
          },
          {
            id: '_2ocwbl9k7',
            title: 'env',
            slug: 'env',
            isPage: false,
            subEntries: []
          },
          {
            id: '_267quekzl',
            title: 'build.env',
            slug: 'build-env',
            isPage: false,
            subEntries: []
          },
          {
            id: '_ga0spn76w',
            title: 'builds',
            slug: 'builds',
            isPage: false,
            subEntries: []
          },
          {
            id: '_qfuj35fva',
            title: 'routes',
            slug: 'routes',
            isPage: false,
            subEntries: []
          },
          {
            id: '_vbgceys04',
            title: 'regions',
            slug: 'regions',
            isPage: false,
            subEntries: []
          },
          {
            id: '_nqknulwbl',
            title: 'public',
            slug: 'public',
            isPage: false,
            subEntries: []
          },
          {
            id: '_9wlc4zqdw',
            title: 'github.enabled',
            slug: 'github-enabled',
            isPage: false,
            subEntries: []
          },
          {
            id: '_p3u9kzfwp',
            title: 'github.autoAlias',
            slug: 'github-autoalias',
            isPage: false,
            subEntries: []
          }
        ]
      },
      {
        id: '_offsw18j5',
        title: 'Ignoring Source Paths',
        slug: 'ignoring-source-paths',
        isPage: true,
        entries: [
          {
            id: '_1hqt1a6uw',
            title: 'What Files Are Uploaded',
            slug: 'what-files-are-uploaded',
            isPage: false,
            subEntries: []
          },
          {
            id: '_6hybc3rzo',
            title: 'What Files Are Served',
            slug: 'what-files-are-served',
            isPage: false,
            subEntries: []
          }
        ]
      },
      {
        id: '_labu7dc6d',
        title: 'Environment Variables and Secrets',
        slug: 'environment-variables-and-secrets',
        isPage: true,
        entries: [
          {
            id: '_osr5gweik',
            title: 'From the CLI',
            slug: 'from-the-cli',
            isPage: false,
            subEntries: []
          },
          {
            id: '_ebn7dmgzx',
            title: 'From now.json',
            slug: 'from-now-json',
            isPage: false,
            subEntries: []
          },
          {
            id: '_npe1fi7pc',
            title: 'Securing Environment Variables Using Secrets',
            slug: 'securing-environment-variables-using-secrets',
            isPage: false,
            subEntries: []
          },
          {
            id: '_mo903qtru',
            title: 'Further Tips',
            slug: 'further-tips',
            isPage: false,
            subEntries: []
          },
          {
            id: '_8gasjw8ih',
            title: 'Built-In Variables',
            slug: 'built-in-variables',
            isPage: false,
            subEntries: []
          }
        ]
      },
      {
        id: '_gakfu7xxg',
        title: 'Concepts',
        slug: 'concepts',
        entries: [
          {
            id: '_zrj1mdubm',
            title: 'Lifecycle',
            slug: 'lifecycle',
            isPage: true,
            subEntries: [
              {
                id: '_xged1l7h6',
                title: 'Builds Lifecycle',
                slug: 'builds-lifecycle'
              }
            ]
          },
          {
            id: '_bcaijqxli',
            title: 'Immutability',
            slug: 'immutability',
            isPage: true,
            subEntries: [
              {
                id: '_lj92eh941',
                title: 'Motivation',
                slug: 'motivation'
              },
              {
                id: '_rkslnsh5m',
                title: 'Historical overview and rollbacks',
                slug: 'historical-overview-and-rollbacks'
              },
              {
                id: '_l4ux2vkh2',
                title: 'Instant Git Reverts',
                slug: 'instant-git-reverts'
              },
              {
                id: '_n09v4fq1e',
                title: 'Improved Collaboration',
                slug: 'improved-collaboration'
              },
              {
                id: '_3bkidqsin',
                title: 'Deduplication Algorithm',
                slug: 'deduplication-algorithm'
              },
              {
                id: '_de3v7nlzh',
                title: 'Skipping deduplication',
                slug: 'skipping-deduplication'
              }
            ]
          },
          {
            id: '_murzcw6fp',
            title: 'URLs',
            slug: 'urls',
            isPage: true,
            subEntries: [
              {
                id: '_xt5h3sdwo',
                title: 'Subdomain',
                slug: 'subdomain'
              },
              {
                id: '_3du1qc4m3',
                title: 'Deployment name',
                slug: 'deployment-name'
              },
              {
                id: '_8a590t9pf',
                title: 'UID (Unique identifier)',
                slug: 'uid-unique-identifier'
              },
              {
                id: '_jxm6g2tc8',
                title: 'Suffix',
                slug: 'suffix'
              }
            ]
          },
          {
            id: '_ueaua6cwl',
            title: 'Special Paths',
            slug: 'special-paths',
            isPage: true,
            subEntries: [
              {
                id: '_thg21o6gl',
                title: 'Source view',
                slug: 'source-view'
              },
              {
                id: '_f3oh77mrz',
                title: 'Logs view',
                slug: 'logs-view'
              },
              {
                id: '_mpfnvnp3w',
                title: 'Security considerations',
                slug: 'security-considerations'
              }
            ]
          },
          {
            id: '_02ov84w3p',
            title: 'Lambdas',
            slug: 'lambdas',
            isPage: true,
            subEntries: [
              {
                id: '_r7c3dza18',
                title: 'Example',
                slug: 'example'
              },
              {
                id: '_eox60ebhs',
                title: 'Conceptual Model',
                slug: 'conceptual-model'
              },
              {
                id: '_rr3r8ws7z',
                title: 'Capabilities and Limits',
                slug: 'capabilities-and-limits'
              }
            ]
          },
          {
            id: '_6ybh406bq',
            title: 'CDN and Global Distribution',
            slug: 'cdn-and-global-distribution',
            isPage: true,
            subEntries: [
              {
                id: '_tob7lea65',
                title: 'Basic CDN',
                slug: 'basic-cdn'
              },
              {
                id: '_cg1hrpx0y',
                title: 'Full CDN',
                slug: 'full-cdn'
              },
              {
                id: '_mozl5vbwb',
                title: 'Purging the Cache',
                slug: 'purging-the-cache'
              }
            ]
          }
        ]
      },
      {
        id: '_57psdm0g8',
        title: 'Builds',
        slug: 'builds',
        isPage: true,
        entries: [
          {
            id: '_fvq16ayqq',
            title: 'Sources and Outputs',
            slug: 'sources-and-outputs',
            isPage: false,
            subEntries: []
          },
          {
            id: '_gqgo112ac',
            title: 'Configuration',
            slug: 'configuration',
            isPage: false,
            subEntries: []
          },
          {
            id: '_5k13dct5n',
            title: 'Builders',
            slug: 'builders',
            isPage: false,
            subEntries: [
              {
                id: '_hmq1k1xj3',
                title: 'Official Builders',
                slug: 'official-builders'
              },
              {
                id: '_7r4k8by1d',
                title: 'Creating a Builder',
                slug: 'creating-a-builder'
              }
            ]
          },
          {
            id: '_y9fgsaxyn',
            title: 'Parallelization',
            slug: 'parallelization',
            isPage: false,
            subEntries: []
          },
          {
            id: '_b2ld3gxyr',
            title: 'Limits',
            slug: 'limits',
            isPage: false,
            subEntries: [
              {
                id: '_xqc5jqn9x',
                title: 'Maximum Builds',
                slug: 'maximum-builds'
              },
              {
                id: '_qy1zbywyj',
                title: 'Builds Timeout',
                slug: 'builds-timeout'
              }
            ]
          }
        ]
      },
      {
        id: '_mefrj2wpp',
        title: 'Builders',
        slug: 'builders',
        entries: [
          {
            id: '_po5jzo41o',
            title: 'Overview',
            slug: 'overview',
            isPage: true,
            subEntries: [
              {
                id: '_9omk2u5wl',
                title: 'When to Use Builders',
                slug: 'when-to-use-builders'
              },
              {
                id: '_sxuigacsw',
                title: 'How to Use Builders',
                slug: 'how-to-use-builders'
              },
              {
                id: '_41jcmft9k',
                title: 'Developing your Own Builder',
                slug: 'developing-your-own-builder'
              },
              {
                id: '_jmg0dn47b',
                title: 'Technical Details',
                slug: 'technical-details'
              }
            ]
          },
          {
            id: '_gwivvfprd',
            title: 'Developer Guide',
            slug: 'developer-guide',
            isPage: true,
            subEntries: [
              {
                id: '_f7wwgi906',
                title: 'Defining the analyze step',
                slug: 'defining-the-analyze-step'
              },
              {
                id: '_5zrrj16x7',
                title: 'Defining the build step',
                slug: 'defining-the-build-step'
              },
              {
                id: '_rcuxla0wb',
                title: 'Defining a ',
                slug: 'defining-a'
              },
              {
                id: '_o9t71pmvu',
                title: 'Execution Context',
                slug: 'execution-context'
              },
              {
                id: '_v5au0s95h',
                title: 'Directory and Cache Lifecycle',
                slug: 'directory-and-cache-lifecycle'
              },
              {
                id: '_4ogeeak4v',
                title: 'Accessing Environment and Secrets',
                slug: 'accessing-environment-and-secrets'
              },
              {
                id: '_wpj0jghtj',
                title: 'Utilities as peerDependencies',
                slug: 'utilities-as-peerdependencies'
              },
              {
                id: '_mq6abnbxc',
                title: 'Files : map<File | Lambda>',
                slug: 'files-map-file-lambda'
              },
              {
                id: '_xrjq1gq9v',
                title: 'File',
                slug: 'file'
              },
              {
                id: '_p2qzgwb7g',
                title: 'FileRef',
                slug: 'fileref'
              },
              {
                id: '_44ykb7qzr',
                title: 'FileFsRef',
                slug: 'filefsref'
              },
              {
                id: '_eq9pkezs6',
                title: 'FileBlob',
                slug: 'fileblob'
              },
              {
                id: '_4ijek5s0m',
                title: 'Lambda',
                slug: 'lambda'
              },
              {
                id: '_o3e2w78sr',
                title: 'LambdaRuntime',
                slug: 'lambdaruntime'
              },
              {
                id: '_als17b9ek',
                title: 'createLambda(Object spec) : Lambda',
                slug: 'createlambda-object-spec-lambda'
              },
              {
                id: '_busqpxlpg',
                title: 'fs/download() : Files',
                slug: 'fs-download-files'
              },
              {
                id: '_hwhhzf68s',
                title: 'fs/glob() : Files',
                slug: 'fs-glob-files'
              },
              {
                id: '_ojy6l6b3v',
                title: 'fs/getWritableDirectory() : String',
                slug: 'fs-getwritabledirectory-string'
              },
              {
                id: '_v2q4gnrkg',
                title: 'fs/rename(Files) : Files',
                slug: 'fs-rename-files-files'
              }
            ]
          }
        ]
      },
      {
        id: '_17oznshqe',
        title: 'Official Builders',
        slug: 'official-builders',
        entries: [
          {
            id: '_x9gg7o570',
            title: 'Static (@now/static)',
            slug: 'static-now-static',
            isPage: true,
            subEntries: []
          },
          {
            id: '_alf8xhnuh',
            title: 'Static Build (@now/static-build)',
            slug: 'static-build-now-static-build',
            isPage: true,
            subEntries: [
              {
                id: '_juh4v0d1r',
                title: 'When to use it',
                slug: 'when-to-use-it'
              },
              {
                id: '_oxf7h54ye',
                title: 'How to use it',
                slug: 'how-to-use-it'
              },
              {
                id: '_caxvikq9f',
                title: 'Technical Details',
                slug: 'technical-details'
              }
            ]
          },
          {
            id: '_13ud4dvpp',
            title: 'Node.js (@now/node)',
            slug: 'node-js-now-node',
            isPage: true,
            subEntries: [
              {
                id: '_tc9df4nv7',
                title: 'When to use it',
                slug: 'when-to-use-it'
              },
              {
                id: '_sfi93a0hi',
                title: 'How to use it',
                slug: 'how-to-use-it'
              },
              {
                id: '_6iajik1d3',
                title: 'Technical Details',
                slug: 'technical-details'
              }
            ]
          },
          {
            id: '_3ybab4esu',
            title: 'Node.js Server (@now/node-server)',
            slug: 'node-js-server-now-node-server',
            isPage: true,
            subEntries: [
              {
                id: '_8zhz3w93s',
                title: 'When to use it',
                slug: 'when-to-use-it'
              },
              {
                id: '_gf4wbeosw',
                title: 'How to use it',
                slug: 'how-to-use-it'
              },
              {
                id: '_24dwhx933',
                title: 'Technical Details',
                slug: 'technical-details'
              }
            ]
          },
          {
            id: '_9mac9kyrg',
            title: 'Next.js (@now/next)',
            slug: 'next-js-now-next',
            isPage: true,
            subEntries: [
              {
                id: '_s8xvbk2no',
                title: 'When to use it',
                slug: 'when-to-use-it'
              },
              {
                id: '_sveu2e1hw',
                title: 'How to use it',
                slug: 'how-to-use-it'
              },
              {
                id: '_5o7b3zi8m',
                title: 'Technical Details',
                slug: 'technical-details'
              }
            ]
          },
          {
            id: '_p1nwj6kof',
            title: 'Go (@now/go)',
            slug: 'go-now-go',
            isPage: true,
            subEntries: [
              {
                id: '_3x6mj1pm8',
                title: 'When to use it',
                slug: 'when-to-use-it'
              },
              {
                id: '_020xleakd',
                title: 'How to use it',
                slug: 'how-to-use-it'
              },
              {
                id: '_biloclqux',
                title: 'Technical Details',
                slug: 'technical-details'
              }
            ]
          },
          {
            id: '_7yi7c2r0w',
            title: 'PHP (@now/php)',
            slug: 'php-now-php',
            isPage: true,
            subEntries: [
              {
                id: '_yaybh9qbo',
                title: 'When to use it',
                slug: 'when-to-use-it'
              },
              {
                id: '_dkfos5bpj',
                title: 'Technical Details',
                slug: 'technical-details'
              }
            ]
          },
          {
            id: '_0pynmobnc',
            title: 'Python (@now/python)',
            slug: 'python-now-python',
            isPage: true,
            subEntries: [
              {
                id: '_0zepofoma',
                title: 'When to use it',
                slug: 'when-to-use-it'
              },
              {
                id: '_39b0uuqlj',
                title: 'How to use it',
                slug: 'how-to-use-it'
              },
              {
                id: '_uowl4hkjn',
                title: 'Technical Details',
                slug: 'technical-details'
              }
            ]
          },
          {
            id: '_fkwkrsp4u',
            title: 'mdx-deck (@now/mdx-deck)',
            slug: 'mdx-deck-now-mdx-deck',
            isPage: true,
            subEntries: [
              {
                id: '_o0yqn9o6a',
                title: 'When to use it',
                slug: 'when-to-use-it'
              },
              {
                id: '_7m0xj55q0',
                title: 'How to use it',
                slug: 'how-to-use-it'
              },
              {
                id: '_dtrsmhgr9',
                title: 'Technical details',
                slug: 'technical-details'
              }
            ]
          },
          {
            id: '_lxkribm5x',
            title: 'Optipng (@now/optipng)',
            slug: 'optipng-now-optipng',
            isPage: true,
            subEntries: [
              {
                id: '_yiy3ttryc',
                title: 'When to use it',
                slug: 'when-to-use-it'
              },
              {
                id: '_2aek4ftba',
                title: 'How to use it',
                slug: 'how-to-use-it'
              },
              {
                id: '_3v9z6ttqg',
                title: 'Technical Details',
                slug: 'technical-details'
              }
            ]
          },
          {
            id: '_yqupa6fra',
            title: 'HTML Minifier (@now/html-minifier)',
            slug: 'html-minifier-now-html-minifier',
            isPage: true,
            subEntries: [
              {
                id: '_dp57q6pbf',
                title: 'When to use it',
                slug: 'when-to-use-it'
              },
              {
                id: '_367d8ycnz',
                title: 'How to use it',
                slug: 'how-to-use-it'
              },
              {
                id: '_i7ti1gbx2',
                title: 'Technical Details',
                slug: 'technical-details'
              }
            ]
          },
          {
            id: '_vzfcs8awm',
            title: 'Markdown (@now/md)',
            slug: 'markdown-now-md',
            isPage: true,
            subEntries: [
              {
                id: '_hk407ug1w',
                title: 'When to use it',
                slug: 'when-to-use-it'
              },
              {
                id: '_eh4162e1z',
                title: 'How to use it',
                slug: 'how-to-use-it'
              },
              {
                id: '_9banoccio',
                title: 'Technical Details',
                slug: 'technical-details'
              }
            ]
          }
        ]
      }
    ]
  },
  {
    id: '_u7dotwvpk',
    title: 'Domains and Aliases',
    slug: 'domains-and-aliases',
    sections: [
      {
        id: '_3co8zjey3',
        title: 'Adding a Domain',
        slug: 'adding-a-domain',
        isPage: true,
        entries: [
          {
            id: '_ijs0623xk',
            title: '1. Using a now.sh Domain',
            slug: '1-using-a-now-sh-domain',
            isPage: false,
            subEntries: []
          },
          {
            id: '_u3fet5627',
            title: '2. Using a custom domain, managed by now',
            slug: '2-using-a-custom-domain-managed-by-now',
            isPage: false,
            subEntries: []
          },
          {
            id: '_l2byc29zg',
            title: '3. Using a custom domain, DNS managed by now',
            slug: '3-using-a-custom-domain-dns-managed-by-now',
            isPage: false,
            subEntries: [
              {
                id: '_hxm2rhs5h',
                title: 'Setup',
                slug: 'setup'
              }
            ]
          },
          {
            id: '_idw6e65ky',
            title: '4. Using a custom domain with a CNAME',
            slug: '4-using-a-custom-domain-with-a-cname',
            isPage: false,
            subEntries: [
              {
                id: '_fkhdl6600',
                title: 'Naked domains',
                slug: 'naked-domains'
              }
            ]
          }
        ]
      },
      {
        id: '_7exzfn5zu',
        title: 'Aliasing a Deployment',
        slug: 'aliasing-a-deployment',
        isPage: true,
        entries: [
          {
            id: '_8ph4azsfh',
            title: 'Aliasing Basics',
            slug: 'aliasing-basics',
            isPage: false,
            subEntries: []
          },
          {
            id: '_vweyzzbl1',
            title: 'Creating Aliases',
            slug: 'creating-aliases',
            isPage: false,
            subEntries: []
          },
          {
            id: '_sfsbprby7',
            title: 'Custom Domains',
            slug: 'custom-domains',
            isPage: false,
            subEntries: []
          },
          {
            id: '_vu44i1fef',
            title: 'Security Considerations',
            slug: 'security-considerations',
            isPage: false,
            subEntries: []
          }
        ]
      },
      {
        id: '_k4cs8a48t',
        title: 'CDN',
        slug: 'cdn',
        isPage: true,
        entries: [
          {
            id: '_13q8h4s1c',
            title: 'Getting Started',
            slug: 'getting-started',
            isPage: false,
            subEntries: []
          },
          {
            id: '_2b85dbafq',
            title: 'Caching',
            slug: 'caching',
            isPage: false,
            subEntries: [
              {
                id: '_kkzetzlxj',
                title: 'Purging',
                slug: 'purging'
              },
              {
                id: '_6njw71587',
                title: 'Expiration',
                slug: 'expiration'
              },
              {
                id: '_jmt8vy7g7',
                title: 'Revalidation',
                slug: 'revalidation'
              }
            ]
          },
          {
            id: '_v73t6i9y2',
            title: 'Other',
            slug: 'other',
            isPage: false,
            subEntries: []
          },
          {
            id: '_q4y3qojsl',
            title: 'Recommendations',
            slug: 'recommendations',
            isPage: false,
            subEntries: []
          },
          {
            id: '_1h3yntt6x',
            title: 'Bypassing cache',
            slug: 'bypassing-cache',
            isPage: false,
            subEntries: []
          },
          {
            id: '_khim77osd',
            title: 'Notes',
            slug: 'notes',
            isPage: false,
            subEntries: []
          }
        ]
      },
      {
        id: '_ojgp7qtc8',
        title: 'DNS',
        slug: 'dns',
        isPage: true,
        entries: [
          {
            id: '_r4jx489lt',
            title: 'Using Now CLI',
            slug: 'using-now-cli',
            isPage: false,
            subEntries: [
              {
                id: '_k06uxtn7t',
                title: 'now dns ls',
                slug: 'now-dns-ls'
              },
              {
                id: '_lrc5fp0jo',
                title: 'now dns add',
                slug: 'now-dns-add'
              },
              {
                id: '_u1jgnui20',
                title: 'now dns rm ',
                slug: 'now-dns-rm'
              }
            ]
          },
          {
            id: '_hj5xy77a7',
            title: 'The API Endpoint',
            slug: 'the-api-endpoint',
            isPage: false,
            subEntries: []
          }
        ]
      }
    ]
  },
  {
    id: '_9m3rjpzyi',
    title: 'Platform',
    slug: 'platform',
    sections: [
      {
        id: '_6ifbztg8m',
        title: 'Overview',
        slug: 'overview',
        isPage: true,
        entries: [
          {
            id: '_qfjcemu32',
            title: 'Versioning',
            slug: 'versioning',
            isPage: false,
            subEntries: []
          },
          {
            id: '_mcmcq8iob',
            title: 'Version Selection',
            slug: 'version-selection',
            isPage: false,
            subEntries: [
              {
                id: '_pqiqi7js2',
                title: 'Team or Account Versioning',
                slug: 'team-or-account-versioning'
              },
              {
                id: '_4aibuwi6a',
                title: 'Per-project Version Pinning',
                slug: 'per-project-version-pinning'
              }
            ]
          }
        ]
      },
      {
        id: '_e8jhys8gp',
        title: 'Upgrade to 2.0',
        slug: 'upgrade-to-2-0',
        isPage: true,
        entries: [
          {
            id: '_2vrg95ytk',
            title: 'Changes Overview',
            slug: 'changes-overview',
            isPage: false,
            subEntries: [
              {
                id: '_zpt80lkon',
                title: 'Platform Versioning',
                slug: 'platform-versioning'
              },
              {
                id: '_nlx7stxm7',
                title: 'Free Tier',
                slug: 'free-tier'
              },
              {
                id: '_2xem06uay',
                title: 'Free seats',
                slug: 'free-seats'
              },
              {
                id: '_bkj3msi7y',
                title: 'Reduced prices',
                slug: 'reduced-prices'
              },
              {
                id: '_7jehpzj4d',
                title: 'Fully on-demand',
                slug: 'fully-on-demand'
              },
              {
                id: '_91ad5kryy',
                title: 'No Types',
                slug: 'no-types'
              }
            ]
          },
          {
            id: '_glxyg5uk4',
            title: 'No Daemons',
            slug: 'no-daemons',
            isPage: false,
            subEntries: [
              {
                id: '_faq15h3qa',
                title: 'No Instances',
                slug: 'no-instances'
              },
              {
                id: '_a1x9y50f9',
                title: 'No Config Mutability',
                slug: 'no-config-mutability'
              },
              {
                id: '_d4i4692b7',
                title: 'No Singleton Builds',
                slug: 'no-singleton-builds'
              },
              {
                id: '_yp73ljifb',
                title: 'Index behavior changes',
                slug: 'index-behavior-changes'
              },
              {
                id: '_7n6jihtkt',
                title: 'Universal Now, in the Cloud',
                slug: 'universal-now-in-the-cloud'
              },
              {
                id: '_289anjcgn',
                title: '.nowignore',
                slug: 'nowignore'
              },
              {
                id: '_njykp6bqv',
                title: 'Configuration (',
                slug: 'configuration'
              },
              {
                id: '_vp79uw55e',
                title: 'CLI',
                slug: 'cli'
              }
            ]
          },
          {
            id: '_2d5ybt2j9',
            title: 'Migration Examples',
            slug: 'migration-examples',
            isPage: false,
            subEntries: []
          },
          {
            id: '_2sbdya6rj',
            title: 'Upgrade Tips',
            slug: 'upgrade-tips',
            isPage: false,
            subEntries: []
          },
          {
            id: '_2ue9uuudl',
            title: "Don't rush to upgrade",
            slug: 'don-t-rush-to-upgrade',
            isPage: false,
            subEntries: [
              {
                id: '_fv6rzg1iv',
                title: 'Ask for help',
                slug: 'ask-for-help'
              },
              {
                id: '_szg5jsc0i',
                title: 'Serverless is better without Servers',
                slug: 'serverless-is-better-without-servers'
              }
            ]
          }
        ]
      },
      {
        id: '_lq6fdogfp',
        title: 'Regions and Providers',
        slug: 'regions-and-providers',
        isPage: true,
        entries: []
      },
      {
        id: '_0invwu9x8',
        title: 'Users and Teams',
        slug: 'users-and-teams',
        isPage: true,
        entries: [
          {
            id: '_vg5orhvtl',
            title: 'Sharing Your Data with Other People',
            slug: 'sharing-your-data-with-other-people',
            isPage: false,
            subEntries: []
          },
          {
            id: '_t7alvduqx',
            title: 'Switching Between Users and Teams',
            slug: 'switching-between-users-and-teams',
            isPage: false,
            subEntries: [
              {
                id: '_2t0y1o0d0',
                title: 'Dashboard',
                slug: 'dashboard'
              },
              {
                id: '_x9iu4er02',
                title: 'Now Desktop',
                slug: 'now-desktop'
              },
              {
                id: '_3o2bp0nnb',
                title: 'Now Desktop',
                slug: 'now-desktop'
              }
            ]
          },
          {
            id: '_vckhehvrp',
            title: 'Changing the User or Team Settings',
            slug: 'changing-the-user-or-team-settings',
            isPage: false,
            subEntries: []
          },
          {
            id: '_cu9fmu6hy',
            title: 'Selecting a Scope for API Requests',
            slug: 'selecting-a-scope-for-api-requests',
            isPage: false,
            subEntries: []
          }
        ]
      },
      {
        id: '_g0xekv2wd',
        title: 'Add-Ons',
        slug: 'add-ons',
        isPage: true,
        entries: [
          {
            id: '_rm3ded683',
            title: 'What Add-Ons Are for',
            slug: 'what-add-ons-are-for',
            isPage: false,
            subEntries: []
          },
          {
            id: '_22a7c2cth',
            title: 'Pricing',
            slug: 'pricing',
            isPage: false,
            subEntries: []
          },
          {
            id: '_l35as66ft',
            title: 'List of Add-Ons and Their Features',
            slug: 'list-of-add-ons-and-their-features',
            isPage: false,
            subEntries: [
              {
                id: '_y2impvzys',
                title: 'Priority Support',
                slug: 'priority-support'
              },
              {
                id: '_x52wh2udv',
                title: 'Advanced Priority Support',
                slug: 'advanced-priority-support'
              },
              {
                id: '_uhv6r7rj8',
                title: 'Live Support',
                slug: 'live-support'
              },
              {
                id: '_p7plkmv49',
                title: 'Custom Deployment Suffix',
                slug: 'custom-deployment-suffix'
              }
            ]
          }
        ]
      },
      {
        id: '_86o868f3l',
        title: 'Glossary',
        slug: 'glossary',
        isPage: true,
        entries: [
          {
            id: '_on9p2dssp',
            title: 'General Terms',
            slug: 'general-terms',
            isPage: false,
            subEntries: [
              {
                id: '_4bqpyx3ua',
                title: 'Deployment',
                slug: 'deployment'
              },
              {
                id: '_g6sdvlbfo',
                title: 'Source Files',
                slug: 'source-files'
              },
              {
                id: '_e53iz6r93',
                title: 'Build',
                slug: 'build'
              },
              {
                id: '_qm62tycsl',
                title: 'Builder',
                slug: 'builder'
              },
              {
                id: '_k2huxqmsy',
                title: 'Build Output',
                slug: 'build-output'
              },
              {
                id: '_xbuqv1oag',
                title: 'Lambda',
                slug: 'lambda'
              },
              {
                id: '_zbu3s9m48',
                title: 'Static File',
                slug: 'static-file'
              }
            ]
          },
          {
            id: '_bckih3b0f',
            title: 'Company & Product',
            slug: 'company-and-product',
            isPage: false,
            subEntries: [
              {
                id: '_zsbt1yyyq',
                title: 'ZEIT',
                slug: 'zeit'
              },
              {
                id: '_fqcwwxc8j',
                title: 'Now',
                slug: 'now'
              },
              {
                id: '_rskk3ck6o',
                title: 'Now CLI',
                slug: 'now-cli'
              },
              {
                id: '_69ifwo6s6',
                title: 'Now Desktop',
                slug: 'now-desktop'
              }
            ]
          }
        ]
      }
    ]
  },
  {
    id: '_n8u465ydi',
    title: 'Routing',
    slug: 'routing',
    sections: [
      {
        id: '_6m8qzmysn',
        title: 'Overview',
        slug: 'overview',
        isPage: true,
        entries: [
          {
            id: '_6k698y18c',
            title: 'Regions',
            slug: 'regions',
            isPage: false,
            subEntries: [
              {
                id: '_omq4vwwwu',
                title: 'Tips',
                slug: 'tips'
              }
            ]
          },
          {
            id: '_vts5hqkz2',
            title: 'Additional Responsibilities',
            slug: 'additional-responsibilities',
            isPage: false,
            subEntries: []
          },
          {
            id: '_t5a3s8hfd',
            title: 'Supported Protocols',
            slug: 'supported-protocols',
            isPage: false,
            subEntries: []
          }
        ]
      },
      {
        id: '_3qez3gqu5',
        title: 'Caching',
        slug: 'caching',
        isPage: true,
        entries: [
          {
            id: '_4txxodkbg',
            title: 'Caching Static Files',
            slug: 'caching-static-files',
            isPage: false,
            subEntries: []
          },
          {
            id: '_0cx9g6guv',
            title: 'Caching Lambda Responses',
            slug: 'caching-lambda-responses',
            isPage: false,
            subEntries: []
          },
          {
            id: '_unjevthrk',
            title: 'Sharding (sharding or sharing?)',
            slug: 'sharding-sharding-or-sharing',
            isPage: false,
            subEntries: []
          }
        ]
      },
      {
        id: '_7u0tl26zi',
        title: 'Headers',
        slug: 'headers',
        isPage: true,
        entries: [
          {
            id: '_5w9d7y27q',
            title: 'now: 1',
            slug: 'now-1',
            isPage: false,
            subEntries: []
          },
          {
            id: '_qur0468lc',
            title: 'server: now',
            slug: 'server-now',
            isPage: false,
            subEntries: []
          },
          {
            id: '_9o9h8cfj0',
            title: 'x-now-cache',
            slug: 'x-now-cache',
            isPage: false,
            subEntries: []
          },
          {
            id: '_4ae6egsrh',
            title: 'x-now-id',
            slug: 'x-now-id',
            isPage: false,
            subEntries: []
          },
          {
            id: '_x291987h0',
            title: 'x-now-trace',
            slug: 'x-now-trace',
            isPage: false,
            subEntries: []
          }
        ]
      },
      {
        id: '_byug79t1e',
        title: 'Encryption',
        slug: 'encryption',
        isPage: true,
        entries: [
          {
            id: '_ai5yy70yd',
            title: 'Supported TLS Versions',
            slug: 'supported-tls-versions',
            isPage: false,
            subEntries: []
          },
          {
            id: '_4p83ozpfz',
            title: 'Supported Ciphers',
            slug: 'supported-ciphers',
            isPage: false,
            subEntries: []
          },
          {
            id: '_lu7q0wkai',
            title: 'Support for HSTS',
            slug: 'support-for-hsts',
            isPage: false,
            subEntries: []
          },
          {
            id: '_03ixp2vt3',
            title: 'How Certificates Are Handled',
            slug: 'how-certificates-are-handled',
            isPage: false,
            subEntries: []
          },
          {
            id: '_7zbhjpzq7',
            title: 'Full Specification',
            slug: 'full-specification',
            isPage: false,
            subEntries: []
          }
        ]
      },
      {
        id: '_q0ii11iy4',
        title: 'Status Codes',
        slug: 'status-codes',
        isPage: true,
        entries: [
          {
            id: '_a7ol1njfi',
            title: 'Response Types',
            slug: 'response-types',
            isPage: false,
            subEntries: []
          },
          {
            id: '_13xqo7c0w',
            title: 'List of Status Codes',
            slug: 'list-of-status-codes',
            isPage: false,
            subEntries: [
              {
                id: '_4191ht4kw',
                title: '303',
                slug: '303'
              },
              {
                id: '_q6rq027a3',
                title: '402',
                slug: '402'
              },
              {
                id: '_w530whrfa',
                title: '404',
                slug: '404'
              },
              {
                id: '_ir7wtnne7',
                title: '404',
                slug: '404'
              },
              {
                id: '_706sxb85l',
                title: '413',
                slug: '413'
              },
              {
                id: '_bzgnfcuf5',
                title: '500',
                slug: '500'
              },
              {
                id: '_pae513knp',
                title: '500',
                slug: '500'
              },
              {
                id: '_k1fmsskqm',
                title: '500',
                slug: '500'
              },
              {
                id: '_ncno85ozo',
                title: '502',
                slug: '502'
              },
              {
                id: '_htx5rwj7l',
                title: '504',
                slug: '504'
              }
            ]
          }
        ]
      },
      {
        id: '_yks95dtyb',
        title: 'Directory Listing',
        slug: 'directory-listing',
        isPage: true,
        entries: [
          {
            id: '_cllkixtx0',
            title: 'Index Files',
            slug: 'index-files',
            isPage: false,
            subEntries: []
          },
          {
            id: '_bnu5we674',
            title: 'Types of List Items',
            slug: 'types-of-list-items',
            isPage: false,
            subEntries: []
          },
          {
            id: '_61mdz1rx2',
            title: 'Disabling the Directory Listing',
            slug: 'disabling-the-directory-listing',
            isPage: false,
            subEntries: [
              {
                id: '_lo0hxr9hq',
                title: 'Include a Index File',
                slug: 'include-a-index-file'
              },
              {
                id: '_tcoi92ui9',
                title: 'Rewrite to a 404 page',
                slug: 'rewrite-to-a-404-page'
              }
            ]
          }
        ]
      },
      {
        id: '_9p6i3cxqv',
        title: 'Compression',
        slug: 'compression',
        isPage: true,
        entries: []
      }
    ]
  },
  {
    id: '_zib79y3st',
    title: 'Integrations',
    slug: 'integrations',
    sections: [
      {
        id: '_crxvlrf2n',
        title: 'Now for GitHub',
        slug: 'now-for-github',
        isPage: true,
        entries: [
          {
            id: '_nmxnr9p16',
            title: 'Connecting the App to Your GitHub Account or Organization',
            slug: 'connecting-the-app-to-your-github-account-or-organization',
            isPage: false,
            subEntries: []
          },
          {
            id: '_xu6yrvmns',
            title: 'Usage',
            slug: 'usage',
            isPage: false,
            subEntries: []
          },
          {
            id: '_wzunqpw40',
            title: 'Standard Behaviour',
            slug: 'standard-behaviour',
            isPage: false,
            subEntries: [
              {
                id: '_ya0tectgu',
                title: 'A Deployment for Each Push',
                slug: 'a-deployment-for-each-push'
              },
              {
                id: '_1r3c8qz34',
                title: 'Aliasing the Main Branch',
                slug: 'aliasing-the-main-branch'
              }
            ]
          },
          {
            id: '_1b6oly0ni',
            title: 'Configuration',
            slug: 'configuration',
            isPage: false,
            subEntries: [
              {
                id: '_ilflmhfk2',
                title: 'Disabling Now for GitHub with ',
                slug: 'disabling-now-for-github-with'
              },
              {
                id: '_0xolbo2nl',
                title: 'Disabling Auto-Aliasing',
                slug: 'disabling-auto-aliasing'
              }
            ]
          }
        ]
      }
    ]
  }
]

class DocPage extends Component {
  state = {
    activeId: null,
    navigationActive: false,
    version: this.props.router.asPath.split(/(v[0-9])/)[1]
  }

  componentDidUpdate(prevProps, prevState) {
    if (this.state.activeId !== prevState.activeId) {
      changeHash(getFragmentById(this.state.activeId))
    }
  }

  getActiveItem = () => {
    return getSlugsForId(this.state.activeId)
  }

  handleVersionChange = event => {
    const href = `/docs/${event.target.value}`
    this.props.router.push(href)
    this.handleIndexClick()
  }

  handleIndexClick = () => {
    if (this.state.navigationActive) {
      bodyLocker.unlock()
      this.setState({
        navigationActive: false
      })
    }
  }

  handleSidebarRef = node => {
    this.sidebarNode = node
  }

  handleEntryActive = entryNode => {
    scrollToElement(this.sidebarNode, entryNode)
  }

  handleSectionActive = sectionNode => {
    if (!getSlugsForId(this.state.activeId).entry) {
      scrollToElement(this.sidebarNode, sectionNode)
    }
  }

  handleIntersect = activeId => {
    if (this.state.activeId !== activeId) {
      this.setState({ activeId })
    }
  }

  handleToggleNavigation = () => {
    this.setState(({ navigationActive }) => {
      if (navigationActive) {
        bodyLocker.unlock()
      } else {
        bodyLocker.lock()
      }

      return {
        navigationActive: !navigationActive
      }
    })
  }

  render() {
    const { children, currentTeamSlug, router, user } = this.props
    const pathSection = getSection(router.pathname)
    const { navigationActive, version } = this.state

    return (
      <MDXProvider
        components={{
          ...components,
          h1: withPermalink(components.h1),
          h2: withPermalink(components.h2),
          h3: withPermalink(components.h3),
          h4: withPermalink(components.h4),
          docsSubentry: SubEntry,
          docsSection: Section,
          docsEntry: Entry
        }}
      >
        <Page>
          <Head
            description="A comprehensive guide to using the Now API and gaining control over the Now platform"
            title={`Now API Documentation`}
            titlePrefix=""
            titleSuffix=" - ZEIT"
          />

          <Header
            currentTeamSlug={currentTeamSlug}
            onToggleNavigation={this.handleToggleNavigation}
            user={user}
          />

          <DocsBuilder docs={children}>
            {({ structure }) => (
              <Main>
                <Sidebar
                  active={navigationActive}
                  innerRef={this.handleSidebarRef}
                >
                  <div className="toggle-group-wrapper">
                    <ToggleGroup>
                      <ToggleItem active={pathSection === '/docs'}>
                        <Link prefetch href="/docs">
                          <a onClick={this.handleIndexClick}>Docs</a>
                        </Link>
                      </ToggleItem>
                      <ToggleItem active={pathSection === '/api'}>
                        <Link prefetch href="/api">
                          <a onClick={this.handleIndexClick}>Api Refence</a>
                        </Link>
                      </ToggleItem>
                      <ToggleItem active={pathSection === '/examples'}>
                        <Link prefetch href="/examples">
                          <a onClick={this.handleIndexClick}>Examples</a>
                        </Link>
                      </ToggleItem>
                    </ToggleGroup>
                  </div>
                  <h5 className="platform-select-title">
                    Now Platform Version
                  </h5>
                  <Select
                    width="100%"
                    defaultValue={version}
                    onChange={this.handleVersionChange}
                  >
                    <option value="v1">v1</option>
                    <option value="v2">v2 (Latest)</option>
                  </Select>
                  <DocsIndex
                    activeItem={this.getActiveItem(structure)}
                    getHref={getHref}
                    onEntryActive={this.handleEntryActive}
                    onSectionActive={this.handleSectionActive}
                    onClickLink={this.handleIndexClick}
                    structure={toc}
                  />
                </Sidebar>
                <Content>
                  <Context.Provider
                    value={{
                      onIntersect: this.handleIntersect
                    }}
                  >
                    {children}
                  </Context.Provider>
                </Content>
              </Main>
            )}
          </DocsBuilder>
          <style jsx>{`
            ul {
              list-style: none;
              margin: 0;
              padding: 0;
            }

            .category-wrapper {
              padding: 40px 0;
            }

            .category-wrapper:not(:last-child) {
              border-bottom: 1px solid #eaeaea;
            }

            .platform-select-title {
              font-size: 14px;
              font-weight: bold;
              margin-bottom: 16px;
              margin-top: 0;
            }

            .toggle-group-wrapper {
              display: none;
            }

            @media screen and (max-width: 950px) {
              .toggle-group-wrapper {
                display: flex;
                align-items: center;
                justify-content: center;
                margin-bottom: 40px;
              }
            }
          `}</style>
        </Page>
      </MDXProvider>
    )
  }
}

export default withRouter(DocPage)
